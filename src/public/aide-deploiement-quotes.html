<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üÜò Aide D√©ploiement Routes Devis - Erreur 404</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0C0C0C;
      color: #F4F4F4;
      padding: 20px;
      line-height: 1.6;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
    }

    .alert-box {
      background: linear-gradient(135deg, #ff5252 0%, #ff1744 100%);
      padding: 30px;
      border-radius: 15px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(255, 82, 82, 0.3);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 10px 30px rgba(255, 82, 82, 0.3); }
      50% { transform: scale(1.02); box-shadow: 0 15px 40px rgba(255, 82, 82, 0.5); }
    }

    .alert-box h1 {
      font-size: 2.5em;
      margin-bottom: 15px;
      color: white;
    }

    .alert-box p {
      font-size: 1.3em;
      color: white;
    }

    .step-box {
      background: rgba(255, 255, 255, 0.05);
      border: 2px solid #00FFC2;
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
    }

    .step-box h2 {
      color: #00FFC2;
      font-size: 1.8em;
      margin-bottom: 20px;
    }

    .step {
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      margin: 15px 0;
      border-radius: 10px;
      border-left: 5px solid #00FFC2;
    }

    .step-number {
      display: inline-block;
      background: #00FFC2;
      color: #0C0C0C;
      width: 40px;
      height: 40px;
      line-height: 40px;
      text-align: center;
      border-radius: 50%;
      font-weight: bold;
      font-size: 1.3em;
      margin-right: 15px;
    }

    .step h3 {
      display: inline-block;
      color: white;
      font-size: 1.3em;
    }

    .step-content {
      margin-top: 15px;
      padding-left: 55px;
    }

    .button {
      display: inline-block;
      background: #00FFC2;
      color: #0C0C0C;
      padding: 15px 30px;
      border-radius: 30px;
      text-decoration: none;
      font-weight: bold;
      margin: 10px 5px;
      font-size: 1.1em;
      transition: all 0.3s;
      cursor: pointer;
      border: none;
    }

    .button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(0, 255, 194, 0.4);
    }

    .button.secondary {
      background: rgba(255, 255, 255, 0.1);
      color: #00FFC2;
      border: 2px solid #00FFC2;
    }

    .warning-box {
      background: rgba(255, 167, 38, 0.1);
      border: 2px solid #ffa726;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    .warning-box h3 {
      color: #ffa726;
      margin-bottom: 10px;
    }

    .success-box {
      background: rgba(76, 175, 80, 0.1);
      border: 2px solid #4CAF50;
      border-radius: 10px;
      padding: 20px;
      margin: 20px 0;
    }

    .success-box h3 {
      color: #4CAF50;
      margin-bottom: 10px;
    }

    code {
      background: rgba(0, 255, 194, 0.1);
      color: #00FFC2;
      padding: 3px 8px;
      border-radius: 5px;
      font-family: 'Courier New', monospace;
    }

    ol, ul {
      margin-left: 20px;
    }

    li {
      margin: 10px 0;
    }

    .video-placeholder {
      background: rgba(0, 0, 0, 0.5);
      border: 2px dashed #00FFC2;
      border-radius: 10px;
      padding: 40px;
      text-align: center;
      margin: 20px 0;
    }

    .checklist {
      list-style: none;
      padding: 0;
    }

    .checklist li {
      padding: 12px;
      margin: 8px 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      border-left: 4px solid transparent;
      transition: all 0.3s;
    }

    .checklist li::before {
      content: '‚òê';
      margin-right: 10px;
      font-size: 1.3em;
      color: #00FFC2;
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }

    .comparison-item {
      background: rgba(0, 0, 0, 0.3);
      padding: 20px;
      border-radius: 10px;
      border: 2px solid transparent;
    }

    .comparison-item.wrong {
      border-color: #ff5252;
    }

    .comparison-item.right {
      border-color: #4CAF50;
    }

    .comparison-item h4 {
      margin-bottom: 15px;
      font-size: 1.2em;
    }

    .comparison-item.wrong h4 {
      color: #ff5252;
    }

    .comparison-item.right h4 {
      color: #4CAF50;
    }

    @media (max-width: 768px) {
      .comparison {
        grid-template-columns: 1fr;
      }
      .alert-box h1 {
        font-size: 1.8em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Alert -->
    <div class="alert-box">
      <h1>üö® Erreur 404 D√©tect√©e</h1>
      <p><strong>Les routes backend n'ont pas √©t√© correctement d√©ploy√©es sur Supabase</strong></p>
      <p style="margin-top: 15px; font-size: 1.1em;">
        ‚è±Ô∏è Temps de r√©solution : <strong>3-5 minutes</strong>
      </p>
    </div>

    <!-- Cause du probl√®me -->
    <div class="step-box">
      <h2>üîç Pourquoi cette erreur ?</h2>
      
      <div class="comparison">
        <div class="comparison-item wrong">
          <h4>‚ùå Ce qui cause l'erreur</h4>
          <ul>
            <li>Le code n'a pas √©t√© copi√© en entier</li>
            <li>Seulement une partie du fichier a √©t√© coll√©e</li>
            <li>Les routes <code>/quotes</code> ne sont pas pr√©sentes</li>
            <li>Le d√©ploiement n'a pas √©t√© fait</li>
          </ul>
        </div>
        
        <div class="comparison-item right">
          <h4>‚úÖ Ce qu'il faut</h4>
          <ul>
            <li>Copier TOUT le fichier (4071 lignes)</li>
            <li>Remplacer TOUT le code dans Supabase</li>
            <li>Les 6 routes <code>/quotes</code> doivent √™tre l√†</li>
            <li>D√©ployer et attendre 30 secondes</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Solution Rapide -->
    <div class="step-box">
      <h2>‚ö° Solution Rapide (Recommand√©e)</h2>

      <div class="step">
        <span class="step-number">1</span>
        <h3>Ouvrir Supabase Dashboard</h3>
        <div class="step-content">
          <p>Cliquez sur ce bouton pour ouvrir directement la page :</p>
          <a href="https://supabase.com/dashboard/project/ptcxeqtjlxittxayffgu/functions/make-server-04919ac5/details" target="_blank" class="button">
            üåê Ouvrir Supabase Edge Function
          </a>
        </div>
      </div>

      <div class="step">
        <span class="step-number">2</span>
        <h3>Aller dans l'√©diteur</h3>
        <div class="step-content">
          <ol>
            <li>Cliquez sur l'onglet <strong>"Editor"</strong> ou <strong>"Code"</strong></li>
            <li>Vous verrez le code actuellement d√©ploy√©</li>
          </ol>
        </div>
      </div>

      <div class="step">
        <span class="step-number">3</span>
        <h3>Copier TOUT le nouveau code</h3>
        <div class="step-content">
          <div class="warning-box">
            <h3>‚ö†Ô∏è IMPORTANT - Ne copiez PAS manuellement !</h3>
            <p>Le fichier fait <strong>4071 lignes</strong>. Vous DEVEZ utiliser les raccourcis clavier :</p>
          </div>
          <ol>
            <li>Ouvrez <code>/supabase/functions/server/index.tsx</code> dans votre √©diteur (VS Code, etc.)</li>
            <li>Appuyez sur <strong>Ctrl+A</strong> (Windows/Linux) ou <strong>Cmd+A</strong> (Mac)</li>
            <li>Tout le fichier doit √™tre s√©lectionn√© (4071 lignes)</li>
            <li>Appuyez sur <strong>Ctrl+C</strong> (Windows/Linux) ou <strong>Cmd+C</strong> (Mac)</li>
          </ol>
        </div>
      </div>

      <div class="step">
        <span class="step-number">4</span>
        <h3>Remplacer dans Supabase</h3>
        <div class="step-content">
          <ol>
            <li>Dans l'√©diteur Supabase, appuyez sur <strong>Ctrl+A</strong> ou <strong>Cmd+A</strong></li>
            <li>Tout le code existant est maintenant s√©lectionn√©</li>
            <li>Appuyez sur <strong>Delete</strong> ou <strong>Suppr</strong></li>
            <li>Le code dispara√Æt (c'est normal !)</li>
            <li>Appuyez sur <strong>Ctrl+V</strong> ou <strong>Cmd+V</strong></li>
            <li>Le nouveau code appara√Æt (4071 lignes)</li>
          </ol>
        </div>
      </div>

      <div class="step">
        <span class="step-number">5</span>
        <h3>V√©rifier avant de d√©ployer</h3>
        <div class="step-content">
          <div class="warning-box">
            <h3>‚ö†Ô∏è V√âRIFICATION OBLIGATOIRE</h3>
            <p>Avant de cliquer sur "Deploy", v√©rifiez :</p>
          </div>
          <ul class="checklist">
            <li>Le fichier fait environ 4071 lignes (regardez en bas de l'√©diteur)</li>
            <li>Cherchez (Ctrl+F) : <code>/make-server-04919ac5/quotes</code></li>
            <li>Vous devez trouver <strong>6 occurrences</strong></li>
            <li>La derni√®re ligne du fichier est : <code>Deno.serve(app.fetch);</code></li>
          </ul>
        </div>
      </div>

      <div class="step">
        <span class="step-number">6</span>
        <h3>D√©ployer</h3>
        <div class="step-content">
          <ol>
            <li>Cliquez sur le bouton <strong>"Deploy"</strong> (en haut √† droite)</li>
            <li>Un message de confirmation appara√Æt</li>
            <li><strong>Attendez 30-60 secondes</strong> (important !)</li>
            <li>Vous devriez voir "‚úÖ Deployment successful"</li>
          </ol>
        </div>
      </div>

      <div class="step">
        <span class="step-number">7</span>
        <h3>Tester</h3>
        <div class="step-content">
          <ol>
            <li>Retournez sur votre application</li>
            <li>Rechargez la page (<strong>Ctrl+Shift+R</strong> ou <strong>Cmd+Shift+R</strong>)</li>
            <li>Allez dans Dashboard ‚Üí Devis</li>
            <li>Cliquez sur "Nouveau devis"</li>
            <li>Essayez de cr√©er un devis</li>
          </ol>
          
          <div class="success-box">
            <h3>‚úÖ Si √ßa fonctionne :</h3>
            <p>Le devis se cr√©e sans erreur 404, un message de succ√®s appara√Æt, et le devis appara√Æt dans la liste !</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Diagnostic Tool -->
    <div class="step-box">
      <h2>üîß Outil de Diagnostic Automatique</h2>
      <p>Utilisez cet outil pour v√©rifier automatiquement si les routes fonctionnent :</p>
      <div style="margin-top: 20px;">
        <a href="/diagnostic-quotes-routes.html" target="_blank" class="button">
          üîç Lancer le Diagnostic Automatique
        </a>
      </div>
      <p style="margin-top: 15px; color: #888;">
        L'outil va tester les routes GET et POST et vous dire exactement ce qui ne va pas.
      </p>
    </div>

    <!-- Erreurs Courantes -->
    <div class="step-box">
      <h2>üêõ Erreurs Courantes</h2>

      <div class="step">
        <h3 style="color: #ff5252;">‚ùå "Le fichier est trop long"</h3>
        <div class="step-content">
          <p><strong>Solution :</strong> C'est normal ! Le fichier fait 4071 lignes. Utilisez Ctrl+A pour tout s√©lectionner d'un coup, ne copiez JAMAIS manuellement.</p>
        </div>
      </div>

      <div class="step">
        <h3 style="color: #ff5252;">‚ùå "L'√©diteur Supabase ne r√©pond plus"</h3>
        <div class="step-content">
          <p><strong>Solution :</strong> Le fichier est volumineux, attendez 5-10 secondes apr√®s le collage. Si √ßa bloque vraiment, rechargez la page Supabase et r√©essayez.</p>
        </div>
      </div>

      <div class="step">
        <h3 style="color: #ff5252;">‚ùå "Erreur 404 persiste apr√®s d√©ploiement"</h3>
        <div class="step-content">
          <p><strong>Solutions :</strong></p>
          <ul>
            <li>Attendez <strong>2 minutes compl√®tes</strong> - le d√©ploiement peut √™tre lent</li>
            <li>Videz le cache : <strong>Ctrl+Shift+R</strong></li>
            <li>V√©rifiez les logs Supabase (onglet "Logs") pour voir si le serveur a bien red√©marr√©</li>
            <li>Red√©ployez une 2√®me fois - parfois √ßa r√©sout le probl√®me</li>
          </ul>
        </div>
      </div>

      <div class="step">
        <h3 style="color: #ff5252;">‚ùå "Je ne trouve pas les 6 routes dans l'√©diteur"</h3>
        <div class="step-content">
          <p><strong>Solution :</strong> Le code n'a pas √©t√© copi√© en entier. Recommencez depuis l'√©tape 3 :</p>
          <ol>
            <li>Ouvrez le fichier local</li>
            <li><strong>Ctrl+A</strong> (s√©lectionner TOUT)</li>
            <li><strong>Ctrl+C</strong> (copier)</li>
            <li>Dans Supabase, <strong>Ctrl+A</strong> puis <strong>Delete</strong></li>
            <li><strong>Ctrl+V</strong> (coller)</li>
            <li>V√©rifiez qu'il y a 4071 lignes</li>
          </ol>
        </div>
      </div>
    </div>

    <!-- V√©rification Finale -->
    <div class="step-box">
      <h2>‚úÖ Checklist de V√©rification Finale</h2>
      <ul class="checklist">
        <li>J'ai ouvert le fichier <code>/supabase/functions/server/index.tsx</code></li>
        <li>J'ai s√©lectionn√© TOUT avec <code>Ctrl+A</code></li>
        <li>J'ai copi√© avec <code>Ctrl+C</code></li>
        <li>J'ai ouvert l'√©diteur Supabase</li>
        <li>J'ai supprim√© TOUT le code existant</li>
        <li>J'ai coll√© le nouveau code avec <code>Ctrl+V</code></li>
        <li>J'ai v√©rifi√© que le fichier fait ~4071 lignes</li>
        <li>J'ai cherch√© <code>/quotes</code> et trouv√© 6 occurrences</li>
        <li>J'ai cliqu√© sur "Deploy"</li>
        <li>J'ai attendu au moins 1 minute</li>
        <li>J'ai recharg√© mon application (Ctrl+Shift+R)</li>
        <li>J'ai test√© la cr√©ation d'un devis</li>
        <li>Aucune erreur 404 !</li>
      </ul>
    </div>

    <!-- Boutons d'action -->
    <div style="text-align: center; margin: 40px 0;">
      <a href="https://supabase.com/dashboard/project/ptcxeqtjlxittxayffgu/functions/make-server-04919ac5/details" target="_blank" class="button">
        üöÄ Aller D√©ployer Maintenant
      </a>
      <a href="/diagnostic-quotes-routes.html" target="_blank" class="button secondary">
        üîç Diagnostic Automatique
      </a>
      <a href="/deploiement-routes-devis.html" target="_blank" class="button secondary">
        üìö Guide Complet
      </a>
    </div>

    <div style="text-align: center; padding: 40px 20px; color: #888; border-top: 1px solid rgba(0, 255, 194, 0.2); margin-top: 40px;">
      <p>üéâ <strong>Une fois d√©ploy√©, le syst√®me de devis sera 100% fonctionnel !</strong></p>
      <p style="margin-top: 10px;">Date : 10 novembre 2024</p>
    </div>
  </div>
</body>
</html>
